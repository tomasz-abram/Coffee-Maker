<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Status Coffee Machine</title>

    <link href="https://cdn.datatables.net/v/bs4/dt-1.10.25/datatables.min.css"
          rel="stylesheet"
          type="text/css"/>

    <link crossorigin="anonymous"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
          integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
          rel="stylesheet">

    <link href="../static/css/main.css" rel="stylesheet" th:href="@{/css/main.css}"/>

</head>

<body>
<div class="container fixed-top" th:insert="fragments/header::header"></div>

<div class="container mt-5">
    <a class="btn btn-dark " th:href="@{/menu}" type="button">Go Back</a>
</div>

<div class="container">
    <div class="text-center">
        <span class="fs-4  align-items-center">Coffees machine status</span>
    </div>
    <hr/>

    <div class="container">
        <div class="text-center row justify-content-center align-items-center">

            <div class="col fs-5">Water level</div>
            <div class="col fs-5">Milk level</div>
            <div class="col fs-5">Coffee beans level</div>
            <div class="col fs-5">Ground container level</div>
            <div class="col fs-5">Descale</div>
            <div class="col fs-5">Water hardness</div>
            <div class="w-100"></div>


            <div class="col">
                <div class=" progress progress-bar-vertical mx-5">
                    <div aria-valuemax="100" aria-valuemin="0" class="progress-bar " role="progressbar"
                         style="height: 80%"
                         th:style="'height:' + ((${status.get().getWaterLevel() * 1.0} / ${machine.getMAX_WATER_CONTAINER()}) * 100.0 ) + '%;'">
                        <span class="sr-only"
                              th:text="${#numbers.formatInteger(((status.get().getWaterLevel() * 1.0 / machine.getMAX_WATER_CONTAINER()) * 100.0) ,1)+ '%'}">% Water Level</span>
                    </div>
                </div>
            </div>


            <div class="col">
                <div class="progress progress-bar-vertical mx-5">
                    <div aria-valuemax="100" aria-valuemin="0" class="progress-bar" role="progressbar"
                         style="height: 80%"
                         th:style="'height:' + ((${status.get().getMilkLevel() * 1.0} / ${machine.getMAX_MILK_CONTAINER()}) * 100.0 ) + '%;'">
                        <span class="sr-only"
                              th:text="${#numbers.formatInteger(((status.get().getMilkLevel() * 1.0 / machine.getMAX_MILK_CONTAINER()) * 100.0) ,1)+ '%'}">% Milk Level</span>
                    </div>
                </div>
            </div>


            <div class="col">
                <div class="progress progress-bar-vertical mx-5">
                    <div aria-valuemax="100" aria-valuemin="0" class="progress-bar" role="progressbar"
                         style="height: 80%"
                         th:style="'height:' + ((${status.get().getCoffeeBeansLevel() * 1.0} / ${machine.getMAX_COFFEE_BEANS_CONTAINER()}) * 100.0 ) + '%;'">
                        <span class="sr-only"
                              th:text="${#numbers.formatInteger(((status.get().getCoffeeBeansLevel() * 1.0 / machine.getMAX_COFFEE_BEANS_CONTAINER()) * 100.0) ,1)+ '%'}">%Beans Level</span>
                    </div>
                </div>
            </div>


            <div class="col">
                <div class="progress progress-bar-vertical mx-5">
                    <div aria-valuemax="100" aria-valuemin="0" class="progress-bar" role="progressbar"
                         style="height: 80%"
                         th:style="'height:' + ((${status.get().getGroundContainerLevel() * 1.0} / ${machine.getMAX_GROUND_CONTAINER()}) * 100.0 ) + '%;'">
                        <span class="sr-only"
                              th:text="${#numbers.formatInteger(((status.get().getGroundContainerLevel() * 1.0 / machine.getMAX_GROUND_CONTAINER()) * 100.0) ,1)+ '%'}">%Ground</span>
                    </div>
                </div>
            </div>


            <div class="col">
                <div class="progress progress-bar-vertical mx-5">
                    <div aria-valuemax="100" aria-valuemin="0" class="progress-bar" role="progressbar"
                         style="height: 80%"
                         th:style="'height:' + ((${status.get().getDescaleCounter() * 1.0} / ${machine.getMAX_DESCALE_COUNTER()}) * 100.0 ) + '%;'">
                        <span class="sr-only"
                              th:text="${#numbers.formatInteger(((status.get().getDescaleCounter() * 1.0 / machine.getMAX_DESCALE_COUNTER()) * 100.0) ,1)+ '%'}">%Milk </span>
                    </div>
                </div>
            </div>


            <div class="col">
                <div class="text-center progress progress-bar progress-light progress-bar-vertical mx-5">

                    <span class="fs-5 w-100  sr-only" th:text="${status.get().getWaterHardness()}">Wat. hard.</span>

                    <span class="fs-5 sr-only w-100">mmol/l</span>
                </div>
            </div>


            <div class="w-100"></div>


            <div class="col ">
                <span th:text="${status.get().getWaterLevel()} + ' /'"></span>
                <span th:text="${machine.getMAX_WATER_CONTAINER() + 'ml'}"></span>
            </div>

            <div class="col">
                <span th:text="${status.get().getMilkLevel()} + ' /'"></span>
                <span th:text="${machine.getMAX_MILK_CONTAINER() + 'ml'}"></span>
            </div>

            <div class="col">
                <span th:text="${status.get().getCoffeeBeansLevel()} + ' /'"></span>
                <span th:text="${machine.getMAX_COFFEE_BEANS_CONTAINER() + 'g'}"></span>
            </div>

            <div class="col">
                <span th:text="${status.get().getGroundContainerLevel()} + ' /'"></span>
                <span th:text="${machine.getMAX_GROUND_CONTAINER() + 'pcs'}"></span>
            </div>

            <div class="col">
                <span th:text="${status.get().getDescaleCounter()} + ' /'"></span>
                <span th:text="${machine.getMAX_DESCALE_COUNTER() }"></span>
            </div>


            <div class="col">

            </div>

            <div class="w-100"></div>

            <div class="col">
                <div class="list-group text-center ">
                    <a class=" list-group-item list-group-item-action"
                       th:href="@{/status-coffee-machine/fill-water-tank(quantity=250)}"> Add 250ml water</a>
                    <a class=" list-group-item list-group-item-action"
                       th:href="@{/status-coffee-machine/fill-water-tank(quantity=500)}"> Add 500ml water</a>
                    <a class=" list-group-item list-group-item-action"
                       th:href="@{/status-coffee-machine/fill-water-tank(quantity=${machine.getMAX_WATER_CONTAINER()})}">
                        Fill to full!</a>
                    <a class=" list-group-item list-group-item-action"
                       th:href="@{/status-coffee-machine/empty-water-tank}">
                        Empty the container</a>
                </div>
            </div>

            <div class="col">
                <div class="list-group text-center ">
                    <a class="list-group-item list-group-item-action"
                       th:href="@{/status-coffee-machine/fill-milk-tank(quantity=250)}"> Add 250ml milk</a>
                    <a class="list-group-item list-group-item-action"
                       th:href="@{/status-coffee-machine/fill-milk-tank(quantity=500)}"> Add 500ml milk</a>
                    <a class="list-group-item list-group-item-action"
                       th:href="@{/status-coffee-machine/fill-milk-tank(quantity=${machine.getMAX_MILK_CONTAINER()})}">
                        Fill to full!</a>
                    <a class="list-group-item list-group-item-action"
                       th:href="@{/status-coffee-machine/empty-milk-tank}">
                        Empty the container</a>
                </div>

            </div>
            <div class="col">
                <div class="list-group text-center ">
                    <a class=" list-group-item list-group-item-action"
                       th:href="@{/status-coffee-machine/fill-beans-container(quantity=50)}"> Add 50g beans</a>
                    <a class="list-group-item list-group-item-action"
                       th:href="@{/status-coffee-machine/fill-beans-container(quantity=100)}"> Add 100g beans</a>
                    <a class="list-group-item list-group-item-action"
                       th:href="@{/status-coffee-machine/fill-beans-container(quantity=${machine.getMAX_MILK_CONTAINER()})}">
                        Fill to full!</a>
                    <a class="list-group-item list-group-item-action"
                       th:href="@{/status-coffee-machine/empty-coffee-beans}">
                        Empty the container</a>

                </div>
            </div>
            <div class="col">

                <div class="list-group text-center">
                    <a class="list-group-item list-group-item-action"
                       th:href="@{/status-coffee-machine/empty-ground-container}"> Clean the ground container </a>
                </div>
            </div>

            <div class="col">

                <div class="list-group text-center ">
                    <a class="list-group-item list-group-item-action"
                       th:href="@{/status-coffee-machine/descale}"> Descale </a>
                </div>
            </div>


            <div class="col">
                <form method="POST" th:action="@{status-coffee-machine/user}">
                    <label class="form-label" for="waterHardness">Set water hardness: </label>

                    <input class="form-control col-4 mb-4" id="waterHardness" name="waterHardness"
                           placeholder="Water hardness"
                           step="0.01" th:field="*{coffeeMachineStatus.waterHardness}" type="number"/>


                    <button class="btn btn-primary w-100" sec:authorize="hasRole('ROLE_ADMIN')"
                            type="submit">Save
                    </button>
                    <button class="btn btn-primary w-100" sec:authorize="hasRole('ROLE_USER')"
                            type="submit">Save
                    </button>

                    <div sec:authorize="hasRole('ROLE_DEFAULT')">
                        <button class="btn w-100 btn-secondary " type="button">Save</button>
                        <span>Register to save  </span>
                    </div>


                </form>
            </div>

        </div>
    </div>

</div>


</body>

</html>