<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Stock Coffee Machine</title>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <link href="https://cdn.datatables.net/v/bs4/dt-1.10.25/datatables.min.css"
          rel="stylesheet"
          type="text/css"/>

    <link crossorigin="anonymous"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
          integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
          rel="stylesheet">

    <link href="../static/css/main.css" rel="stylesheet" th:href="@{/css/main.css}"/>

</head>

<body>
<div class="container fixed-top" th:insert="fragments/header::header"></div>

<div class="container mt-5">
    <a class="btn btn-dark " th:href="@{/menu}" type="button">Back</a>
</div>

<div class="container">
    <div class="text-center">
        <span class="fs-4  align-items-center">Coffees machine stock</span>
    </div>
    <hr/>

    <div class="container">
        <div class="text-center row justify-content-center align-items-center">

            <div class="col fs-5">Water level</div>
            <div class="col fs-5">Milk level</div>
            <div class="col fs-5">Coffee beans level</div>
            <div class="col fs-5">Ground container level</div>
            <div class="col fs-5">Descale</div>
            <div class="col fs-5">Water hardness</div>
            <div class="w-100"></div>

            <div class="col">
                <div class=" progress progress-bar-vertical mx-5">
                    <div aria-valuemax="100" aria-valuemin="0" class="progress-bar bg-opacity-75"
                         role="progressbar"
                         style="height: 80%"
                         th:classappend="
            ${(waterStock.getStatus() =='Ok' ? 'bg-success': '') +
              (waterStock.getStatus() =='Warning' ? 'bg-warning': '')+
              (waterStock.getStatus() =='Danger' ? 'bg-danger': '')}"
                         th:style="'height:' + ((${waterStock.getValue() * 1.0} / ${machine.getMAX_WATER_CONTAINER()}) * 100.0 ) + '%;'">
                        <span class="sr-only"
                              th:text="${#numbers.formatInteger(((waterStock.getValue() * 1.0 / machine.getMAX_WATER_CONTAINER()) * 100.0) ,1)+ '%'}">% Water Level</span>
                    </div>
                </div>
            </div>


            <div class="col">
                <div class="progress progress-bar-vertical mx-5">
                    <div aria-valuemax="100" aria-valuemin="0" class="progress-bar bg-opacity-75" role="progressbar"
                         style="height: 80%"
                         th:classappend="
            ${(milkStock.getStatus() =='Ok' ? 'bg-success': '') +
              (milkStock.getStatus() =='Warning' ? 'bg-warning': '')+
              (milkStock.getStatus() =='Danger' ? 'bg-danger': '')}"
                         th:style="'height:' + ((${milkStock.getValue() * 1.0} / ${machine.getMAX_MILK_CONTAINER()}) * 100.0 ) + '%;'">
                        <span class="sr-only"
                              th:text="${#numbers.formatInteger(((milkStock.getValue() * 1.0 / machine.getMAX_MILK_CONTAINER()) * 100.0) ,1)+ '%'}">% Milk Level</span>
                    </div>
                </div>
            </div>


            <div class="col">
                <div class="progress progress-bar-vertical mx-5">
                    <div aria-valuemax="100" aria-valuemin="0" class="progress-bar bg-opacity-75" role="progressbar"
                         style="height: 80%"
                         th:classappend="
            ${(coffeeBeansStock.getStatus() =='Ok' ? 'bg-success': '') +
              (coffeeBeansStock.getStatus() =='Warning' ? 'bg-warning': '')+
              (coffeeBeansStock.getStatus() =='Danger' ? 'bg-danger': '')}"
                         th:style="'height:' + ((${coffeeBeansStock.getValue() * 1.0} / ${machine.getMAX_COFFEE_BEANS_CONTAINER()}) * 100.0 ) + '%;'">
                        <span class="sr-only"
                              th:text="${#numbers.formatInteger(((coffeeBeansStock.getValue() * 1.0 / machine.getMAX_COFFEE_BEANS_CONTAINER()) * 100.0) ,1)+ '%'}">%Beans Level</span>
                    </div>
                </div>
            </div>


            <div class="col">
                <div class="progress progress-bar-vertical mx-5">
                    <div aria-valuemax="100" aria-valuemin="0" class="progress-bar bg-opacity-75" role="progressbar"
                         style="height: 80%"
                         th:classappend="
            ${(groundContainerStock.getStatus() =='Ok' ? 'bg-success': '') +
              (groundContainerStock.getStatus() =='Warning' ? 'bg-warning': '')+
              (groundContainerStock.getStatus() =='Danger' ? 'bg-danger': '')}"
                         th:style="'height:' + ((${groundContainerStock.getValue() * 1.0} / ${machine.getMAX_GROUND_CONTAINER()}) * 100.0 ) + '%;'">
                        <span class="sr-only"
                              th:text="${#numbers.formatInteger(((groundContainerStock.getValue() * 1.0 / machine.getMAX_GROUND_CONTAINER()) * 100.0) ,1)+ '%'}">%Ground</span>
                    </div>
                </div>
            </div>


            <div class="col">
                <div class="progress progress-bar-vertical mx-5">
                    <div aria-valuemax="100" aria-valuemin="0" class="progress-bar bg-opacity-75" role="progressbar"
                         style="height: 80%"
                         th:classappend="
            ${(descaleCounter.getStatus() =='Ok' ? 'bg-success': '') +
              (descaleCounter.getStatus() =='Warning' ? 'bg-warning': '')+
              (descaleCounter.getStatus() =='Danger' ? 'bg-danger': '')}"
                         th:style="'height:' + ((${descaleCounter.getValue() * 1.0} / ${machine.getMAX_DESCALE_COUNTER()}) * 100.0 ) + '%;'">
                        <span class="sr-only"
                              th:text="${#numbers.formatInteger(((descaleCounter.getValue()* 1.0 / machine.getMAX_DESCALE_COUNTER()) * 100.0) ,1)+ '%'}">%Milk </span>
                    </div>
                </div>
            </div>


            <div class="col">
                <div class="text-center progress progress-bar progress-light progress-bar-vertical mx-5">

                    <span class="fs-5 w-100  sr-only" th:text="${waterHardnessStock.getValue()}">Wat. hard.</span>

                    <span class="fs-5 sr-only w-100">

                    </span>
                </div>
            </div>


            <div class="w-100"></div>


            <div class="col ">
                <span th:text="${#numbers.formatDecimal(waterStock.getValue(),0,'COMMA',0,'POINT')} + ' /'"></span>
                <span th:text="${machine.getMAX_WATER_CONTAINER() + 'ml'}"></span>
            </div>

            <div class="col">
                <span th:text="${#numbers.formatDecimal(milkStock.getValue(),0,'COMMA',0,'POINT')} + ' /'"></span>
                <span th:text="${machine.getMAX_MILK_CONTAINER() + 'ml'}"></span>
            </div>

            <div class="col">
                <span th:text="${coffeeBeansStock.getValue()} + ' /'"></span>
                <span th:text="${machine.getMAX_COFFEE_BEANS_CONTAINER() + 'g'}"></span>
            </div>

            <div class="col">
                <span th:text="${#numbers.formatDecimal(groundContainerStock.getValue(),0,'COMMA',0,'POINT')} + ' /'"></span>
                <span th:text="${machine.getMAX_GROUND_CONTAINER() + 'pcs'}"></span>
            </div>

            <div class="col">
                <span th:text="${descaleCounter.getValue()} + ' /'"></span>
                <span th:text="${machine.getMAX_DESCALE_COUNTER() }"></span>
            </div>


            <div class="col">

            </div>

            <div class="w-100"></div>

            <div class="col">
                <div class="list-group text-center ">
                    <a class=" list-group-item list-group-item-action"
                       th:href="@{/stock-coffee-machine/fill-water-tank(quantity=250)}"> Add 250ml water</a>
                    <a class=" list-group-item list-group-item-action"
                       th:href="@{/stock-coffee-machine/fill-water-tank(quantity=500)}"> Add 500ml water</a>
                    <a class=" list-group-item list-group-item-action"
                       th:href="@{/stock-coffee-machine/fill-water-tank(quantity=${machine.getMAX_WATER_CONTAINER()})}">
                        Fill to full!</a>
                    <a class=" list-group-item list-group-item-action"
                       th:href="@{/stock-coffee-machine/empty-water-tank}">
                        Empty the container</a>
                </div>
            </div>

            <div class="col">
                <div class="list-group text-center ">
                    <a class="list-group-item list-group-item-action"
                       th:href="@{/stock-coffee-machine/fill-milk-tank(quantity=250)}"> Add 250ml milk</a>
                    <a class="list-group-item list-group-item-action"
                       th:href="@{/stock-coffee-machine/fill-milk-tank(quantity=500)}"> Add 500ml milk</a>
                    <a class="list-group-item list-group-item-action"
                       th:href="@{/stock-coffee-machine/fill-milk-tank(quantity=${machine.getMAX_MILK_CONTAINER()})}">
                        Fill to full!</a>
                    <a class="list-group-item list-group-item-action"
                       th:href="@{/stock-coffee-machine/empty-milk-tank}">
                        Empty the container</a>
                </div>

            </div>
            <div class="col">
                <div class="list-group text-center ">
                    <a class=" list-group-item list-group-item-action"
                       th:href="@{/stock-coffee-machine/fill-beans-container(quantity=50)}"> Add 50g beans</a>
                    <a class="list-group-item list-group-item-action"
                       th:href="@{/stock-coffee-machine/fill-beans-container(quantity=100)}"> Add 100g beans</a>
                    <a class="list-group-item list-group-item-action"
                       th:href="@{/stock-coffee-machine/fill-beans-container(quantity=${machine.getMAX_MILK_CONTAINER()})}">
                        Fill to full!</a>
                    <a class="list-group-item list-group-item-action"
                       th:href="@{/stock-coffee-machine/empty-coffee-beans}">
                        Empty the container</a>

                </div>
            </div>
            <div class="col">

                <div class="list-group text-center">
                    <a class="list-group-item list-group-item-action"
                       th:href="@{/stock-coffee-machine/empty-ground-container}"> Clean the ground container </a>
                </div>
            </div>

            <div class="col">

                <div class="list-group text-center ">
                    <a class="list-group-item list-group-item-action"
                       th:href="@{/stock-coffee-machine/descale}"> Descale </a>
                </div>
            </div>


            <div class="col">
                <form method="POST" th:action="@{stock-coffee-machine/user}" th:object="${coffeeMachineStock}">
                    <label class="form-label" for="waterHardness">Set water hardness: </label>

                    <input class="form-control col-4 mb-4" id="waterHardness" name="waterHardness"
                           placeholder="Water hardness" step="0.01" th:field="*{value}" type="number"/>

                    <div sec:authorize="hasAnyRole('ROLE_ADMIN' , 'ROLE_USER')">
                        <button class="btn btn-primary w-100" type="submit">Save</button>
                    </div>

                    <div sec:authorize="hasRole('ROLE_DEFAULT')">
                        <button class="btn w-100 btn-secondary" data-bs-placement="left" data-bs-toggle="tooltip"
                                title="Register to be able to change this the value!"
                                type="button">Save
                        </button>
                    </div>


                </form>
            </div>

        </div>
    </div>

</div>
<script>
    // Initialize tooltips
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    })
</script>


</body>

</html>